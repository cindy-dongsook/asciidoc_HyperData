////
 ---------------------
 section level-1 ===
 ---------------------
////
[#sect_analytics_ml_labs]
=== ML 실험실

분석 > [ML Lab] 메뉴를 선택하면 ML 실험실 화면에서 기계학습을 이용한 분석을 수행할 수 있다.

왼쪽에 실험(Experiment) 목록을 선택하면 해당 실험 상세 정보를 조회할 수 있다<<figure_experiment_detail, @@>> 참고).

목록의 '검색' 입력항목에 실험 이름을 입력하고 <Enter> 키를 누르거나 image:resources/icon_search.png[width=22] 아이콘을 클릭하면 등록된 실험 정보를 검색할 수 있다.[+ 실험] 버튼을 클릭해서 실험 정보를 생성할 수 있고, 실험 목록을 선택한 후 [삭제] 버튼을 클릭하면 선택한 정보를 삭제할 수 있다.
 
image::resources/figure_experiments.png[title="ML 실험실 화면", width=750]

목록에서 조회할 실험 정보를 선택하면 해당 실험에 대한 상세 정보가 조회된다.

image::resources/figure_experiment_create.png[title="실험 상세 조회", width=600]

////
 ---------------------
 section level-2 ====
 ---------------------
////
==== 실험 생성 

<<figure_experiments, ML 실험실 화면>>에서 [+실험] 버튼을 클릭하면 실험 정보를 생성할 수 있다. 각 항목을 입력한 후 [생성] 버튼을 클릭한다.

image::resources/figure_experiment_detail.png[title="실험 상세 조회", width=750]

다음은 각 항목에 대한 설명이다. (*은 필수 입력 항목)

[width="100%",cols="3,7",options="header"]
|===========
|항목		|설명
|이름 *		|생성할 실험 이름을 입력한다.
|이미지 *	|Docker 이미지를 선택한다.
|자원 설정 *|CPU 사용량, 메모리 사용량, 저장소 크기를 설정한다.
|비밀 번호	|보안을 위해 코드 작성에 접근할 수 있는 Server Access Key를 설정한다.
|설명		|실험 정보에 대한 설명을 입력한다. 
|===========


////
 ---------------------
 section level-2 ====
 ---------------------
////
==== 실험 삭제

<<figure_experiments,ML 실험실 화면 >>에서 왼쪽 목록에서 삭제할 실험 정보를 선택한 후 [삭제] 버튼을 클릭하거나 <<figure_experiment_detail,ML 실험실 상세 조회 화면 >>에서 [삭제] 버튼을 클릭하면 생성 및 실행 완료된 실험 정보를 삭제할 수 있다. 삭제할 목록을 확인한 후 [삭제] 버튼을 클릭한다.

image::resources/figure_experiment_delete.png[title="실험 삭제", width=300]

////
 ---------------------
 section level-2 ====
 ---------------------
////
[#sect_experiment_detail]
==== 실험 상세 조회

<<figure_experiments,ML 실험실 화면 >>의 실험 목록에서 실험 정보를 선택하면 등록된 실험의 상세 정보와 모델 정보를 조회할 수 있다.

[코드 수정] 버튼을 클릭하면 사용자가 직접 기계학습 코드를 작성<<sect_jupyter_code,"기계학습 코드 작성">> 참고)할 수 있고, [삭제] 버튼을 클릭하면 해당 실험 정보를 삭제할 수 있다.

image::resources/figure_experiment_detail.png[title="실험 상세 조회", width=750]

* 실험기본 정보
+
실험의 기본 정보를 조회한다.
* [모델 목록] 탭
+
해당 실험에서 생성된 모델의 상태를 확인할 수 있다. [모델 생성] 버튼을 클릭해서 학습할 모델을 생성할 수 있고, 모델을 선택한 후 [삭제] 버튼을 클릭하면 생성 및 학습 완료된 모델을 삭제할 수 있다.
+
image::resources/figure_experiment_detail_1.png[title="실험 상세 조회 - [모델 목록] 탭", width=750]
+
다음은 각 항목에 대한 설명이다.
+
[width="100%",cols="2,8a",options="header"]
|=========
|항목	    |설명
|모델 이름  |모델 이름을 클릭하면 Model Details 화면([그림 6.36])에서 해당 모델의 상세 정보와 Serving 결과로 생성된 Serve URL과 전처리와 훈련 과정의 로그 및 코드를 확인할 수 있다.
|훈련 상태  |모델의 상태를 나타낸다. +
– Training : 모델 생성 중인 상태 +
– Trained : 모델 생성이 완료된 상태 +
– Train fail : 모델 생성에 실패한 상태
|배포 상태  | 모델이 서비스화되어 데이터 추론이 가능한지 여부를 나타낸다. +
– Off : 모델이 서비스화되지 않아 데이터 추론이 불가능한 상태 +
– On : 모델이 서비스화되어 데이터 추론이 가능한 상태 +
– Failed : 모델의 서비스화가 실패한 상태
|생성 시각  |모델의 생성일자이다.
|완료 시각  |훈련이 완료된 시점이다. 
|동작		|모델에 대해 다음의 작업을 수행할 수 있다. +
– : 모델을 서비스화한다. 자세한 내용은 “6.3.7. 모델 서비스화”를 참고한다. +
– : 모델을 삭제한다. 자세한 내용은 “6.3.5. 모델 삭제”를 참고한다.
|=========
* [추론 목록] 탭
+
해당 실험에서 생성된 추론의 상태를 확인할 수 있다. [추론 생성] 버튼을 클릭해서 추론을 생성할 수 있고, 추론을 선택한 후 [삭제] 버튼을 클릭하면 추론을 삭제할 수 있다.
+
image::resources/figure_experiment_detail_2.png[title="실험 상세 조회 - [추론 목록] 탭", width=750]
+
다음은 각 항목에 대한 설명이다.
+
[width="100%",cols="2,8a",options="header"]
|=========
|항목		|설명
|추론 이름	|추론 이름을 클릭하면 Inference Details 화면([그림 6.40])에서 해당 추론의 상세 정보와 전처리와 추론 과정의 로그 및 코드를 확인할 수 있다.
|추론 상태	|추론의 상태를 나타낸다. +
– Running : 추론중인 상태 +
– Succeeded : 추론 완료된 상태 +
– Failed : 추론에 실패한 상태
|생성 시각	|추론의 생성일자이다.
|완료 시각	|추론이 완료된 시점이다.
|동작		|추론에 대해 다음의 작업을 수행할 수 있다. +
–: 추론 결과를 다운로드한다. +
– : 추론을 삭제한다. 자세한 내용은 “6.3.9. 추론 삭제”를 참고한다.
|=========

*기계학습 코드 작성*

<<figure_experiment_detail, 실험 상세 조회 화면>>에서 [코드 수정] 버튼을 클릭하면 사용자가 직접 기계학습 코드를 작성하고 실험할 수 있는 독립적인 개발 환경인 Jupyter Notebook 환경을 제공한다.

image::resources/figure_jupyternotebook.png[title="Jupyter Notebook 환경", width=750]

NOTE: 본 안내서에서는 Jupyter Notebook 환경에 대한 상세한 설명은 하지 않는다. 자세한 내용은
link:https://nbviewer.jupyter.org/github/jupyter/notebook/blob/master/docs/source/examples/Notebook/Running%20Code.ipynb[https://nbviewer.jupyter.org/github/jupyter/notebook/blob/master/docs/source/examples/Notebook/Running%20Code.ipynb]를 참고한다.

실험을 생성한 직후에는 user_pre.py, user_train.py, user_inf_pre.py, user_inf_predict.py 파일이 작성되어 있지 않기 때문에 [코드 수정] 버튼을 클릭해서 파일을 작성해야 한다. 실험 정보를 생성할 때 입력한 '비밀번호' 항목의 값을 입력하면 Jypyter Notebook에서 직접 코드를 작성해서 실험할 수 있다.

Jupyter Notebook에서 작성한 코드 파일이 있다면 <<figure_experiment_detail, 실험 상세 조회 화면>>에서 [모델 생성] 버튼을 클릭해서 학습할 모델을 생성하거나 [추론 생성] 버튼을 클릭해서 추론을 생성할 수 있다.

모델이나 추론을 생성할 때 다음의 Hyper API를 사용할 수 있다.

[width="100%",cols="3,7",options="header"]
|============
|API		|
|list_do    | 데이터소스에 등록한 DO의 리스트(DO이름과 ID)를 가져온다.
|load_do    | 데이터소스에 등록한 DO 중 선택한 DO를 불러온다.
|save_model | 모델을 저장한다.
|list_model | 같은 이미지를 사용하여 만들어진 모델들의 리스트를 가져온다.
|load_do_meta| 특정 do의 메타정보를 가져온다.
|load_model | 모델을 로드한다.
|save_do    | 추론 결과를 지정한 DO에 저장한다.
|============

다음은 Hyper API를 사용한 user_pre.py, user_train.py, user_inf_pre.py, user_inf_predict.py 파일 코드 예제이다.

image::resources/figure_hyperapi_example_1.png[title="Hyper API를 이용한 기계학습 코드 예제 (user_pre.py)", width=750]

image::resources/figure_hyperapi_example_2.png[title="Hyper API를 이용한 기계학습 코드 예제 (user_train.py)", width=750]

image::resources/figure_hyperapi_example_3.png[title="Hyper API를 이용한 기계학습 코드 예제 (user_inf_pre.py)", width=750]

image::resources/figure_hyperapi_example_4.png[title="Hyper API를 이용한 기계학습 코드 예제 (user_inf_predict.py)", width=750]

////
 ---------------------
 section level-2 ====
 ---------------------
////
[#sect_model_create]
==== 모델 생성

<<figure_experiment_detail_1, 실험 상세 조회 화면>>에서 [모델 생성] 버튼을 클릭하면 모델을 생성할 수 있다. 각 항목을 입력한 후 [생성] 버튼을 클릭한다.

image::resources/figure_model_create.png[title="모델 생성", width=530]


다음은 입력 항목에 대한 설명이다.

[width="100%",cols="3,7",options="header"]
|===========
|항목		|설명
|CPU (core) |모델 훈련에 사용되는 CPU 사용량을 설정한다.
|메모리 (Gi)|모델 훈련에 사용되는 메모리 사용량을 설정한다.
|GPU (개)	|모델 훈련에 사용되는 GPU 사용량을 설정한다.
|===========

NOTE: 모델을 생성하기 전에 사용자가 Jupyter Notebook에서 user_pre.py와 user_train.py 파일이 작성되어 있어야 한다. 파일 작성에 대한 자세한 내용은 <<sect_jupyter_code,"기계학습 코드 작성">>을 참고한다.

////
 ---------------------
 section level-2 ====
 ---------------------
////
[#sect_model_delete]
==== 모델 삭제

<<figure_experiment_detail_1,실험 상세 조회 화면 >>의 [모델 목록] 탭의 목록에서 삭제할 모델을 선택한 후 [삭제] 버튼을 클릭하거나 '동작' 항목의 image:resources/icon_model_delete.png[width=22] 버튼을 클릭하면 생성 및 실행 완료된 모델을 삭제할 수 있다. 삭제할 목록을 확인한 후 [삭제] 버튼을 클릭한다.

image::resources/figure_model_delete.png[title="모델 삭제", width=300]

////
 ---------------------
 section level-2 ====
 ---------------------
////
[#sect_mllabs_model_detail]
==== 모델 상세 조회

<<figure_experiment_detail_1, 실험 상세 조회 화면>>의 [모델 목록] 탭의 목록에서 '모델 이름' 항목을 클릭하면 해당 모델의 상세 정보를 조회할 수 있다. [모델 다운로드] 버튼을 클릭하면 모델을 다운로드할 수 있고, [삭제] 버튼을 클릭하면 모델 정보를 삭제할 수 있다.

image::resources/figure_model_detail.png[title=" Model Details 화면", width=750]

* 모델 기본 정보
+
모델의 기본 정보를 조회한다. 다음은 각 항목에 대한 설명이다.
+
[width="100%",cols="3,7",options="header"]
|=========
|항목		|설명
|실험		|
|생성 시각  |
|훈련 상태  |
|배포 상태  |
|배포 URL   |
|=========
* 모델 추가 정보
+
[전처리 로그] 탭, [훈련 로그] 탭, [전처리 코드] 탭, [학습코드] 탭에서 모델의 전처리와 학습 로그 및 코드를 조회할 수 있다.

NOTE: [모델 다운로드] 버튼을 클릭하면 모델에 적용된 알고리즘[xgboost, randomforest]별로 생성된 모델의 세부 정보(hyperparameter 내역, 사용된 알고리즘 내역 등등) 등을 메타 데이터 형태로 저장된다. 이때 각 파일의 확장자는 알고리즘별로 다르다. 다운로드된 파일은 사용자가 모델 내부정보를 읽을 수가 없기 때문에 사용할 수 있는 곳은 없으나 추후에 구현 예정인 HyperData API 서비스(모델 로드 서비스)를 통해서만 모델 정보를 확인할 수 있으며, 생성된 모델을 기반으로 다른 데이터에 테스트를 진행할 수 있다.

////
 ---------------------
 section level-2 ====
 ---------------------
////
[#sect_model_serving]
==== 모델 서비스화 

<<figure_experiment_detail_1,실험 상세 조회 화면 >>에서 [모델 목록] 탭의 목록에서 '동작' 항목에 image:resources/icon_serving.png[width=22] 버튼을 클릭하면 학습된 기계학습 모델을 AI 서비스화할 수 있다. 각 항목을 설정한 후[Confirm]버튼을 클릭하면 서비스화가 진행된다.

image::resources/figure_serve_create.png[title="모델서비스화", width=300]

다음은 각 항목에 대한 설명이다.

[width="100%",cols="3,7",options="header"]
|==========
|항목		|설명
|Pod Number	|
|CPU(core)	|
|Memory(GI)	|
|==========

NOTE: 모델의 서비스화가 성공하면 <<figure_experiment_detail_1, 실험 상세 조회 화면>>에서 모델 목록의 '배포 상태' 항목이 'On'으로 변경되고, <<figure_model_detail, Model Details 화면>>의 '배포 URL'에서 서비스 정보를 조회할 수 있다.

////
 ---------------------
 section level-2 ====
 ---------------------
////
[#sect_mllab_inference_create]
==== 추론 생성

<<figure_experiment_detail_2,실험 상세 조회 화면 >>에서 [추론 목록] 탭의 [추론 생성] 버튼을 클릭하면 모델을 생성할 수 있다. 각 항목을 입력한 후 [생성] 버튼을 클릭한다.

image::resources/figure_mllab_inference_create.png[title="추론 생성", width=500]

다음은 입력 항목에 대한 설명이다.

[width="100%",cols="3,7",options="header"]
|===========
|항목		|설명
|CPU (core)	|
|메모리 (Gi)|
|GPU (개)   |
|===========

 
NOTE: 추론을 생성하기 전에 사용자가 Jupyter Notebook에서 user_inf_pre.py와 user_inf_predict.py 파일이 작성되어 있어야 한다. 파일 작성에 대한 자세한 내용은 <<sect_jupyter_code,"기계학습 코드 작성">>을 참고한다.
 
////
 ---------------------
 section level-2 ====
 ---------------------
////
[#sect_mllab_inference_delete]
====  추론 삭제

<<figure_experiment_detail_2, 실험 상세 조회 화면>>의 [추론 목록] 탭에서 [삭제] 버튼을 클릭하거나 목록의 '동작' 항목에 image:resources/icon_model_delete.png[ width=22] 버튼을 클릭하면 생성 및 실행 완료된 추론을 삭제할 수 있다. 삭제할 목록을 확인한 후 [삭제] 버튼을 클릭한다.

image::resources/figure_mllab_inference_delete.png[title="추론 삭제", width=300]

////
 ---------------------
 section level-2 ====
 ---------------------
////
[#sect_mllabs_inference_detail]
==== 추론 상세 조회

<<figure_experiment_detail_2, 실험 상세 조회 화면>>에 [추론 목록] 탭의 목록에서 '추론 이름' 항목을 클릭하면 해당 추론의 상세 정보를 조회할 수 있다. [결과 다운로드] 버튼을 클릭하면 추론 결과를 다운로드할 수 있고, [삭제] 버튼을 클릭하면 해당 추론을 삭제할 수 있다.

image::resources/figure_mllab_inference_detail.png[title="Inference Details 화면", width=750]

* 추론 기본 정보
+
추론의 기본 정보를 조회한다. 다음은 각 항목에 대한 설명이다.
+
[width="100%",cols="3,7",options="header"]
|=========
|항목		|설명
|실험		|
|추론 상태  |
|생성 시각  |
|=========
* 추론 추가 정보
+
[전처리 로그] 탭, [추론 로그] 탭, [전처리 코드] 탭, [추론코드] 탭에서 추론의 전처리와 추론 로그 및 코드를 조회할 수 있다.
