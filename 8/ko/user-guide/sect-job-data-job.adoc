////
 ---------------------
 section level-1 ===
 ---------------------
////
[#sect_job_data_job]
=== Data Job 

Data Job은 등록된 데이터소스로부터 데이터 가공 및 분석을 작업을 수행한다. Data Job을 생성하고 작성함으로서 단위 분석작업을 정의할 수 있고, 작성된 Data Job을 동작함으로서 분석 작업을 수행한다. 작성된 Data Job은 Service Job에서 사용된다.

[JOB] >[Data Job] 메뉴를 선택하면 Data Job을 조회하거나 생성, 수정, 삭제할 수 있다. [생성] 버튼을 클릭하면 Data Job을 생성할 수 있고, 생성 후 초기상태는 Draft로 나타난다. Draft란 작업 수행 전의 Job을 뜻한다.

목록의 '동작' 항목에서 image:resources/icon_edit.png[width=20] 아이콘을 클릭하면 Data Job을 수정할 수 있다. 목록에서 Data Job을 선택한 후 [삭제] 버튼을 클릭하거나 '동작' 항목에 image:resources/icon_delete.png[width=20] 아이콘을 클릭하면 Data Job을 삭제할 수 있다. 목록에서 Data Job을 선택한 후 
image:resources/icon_export.png[width=20] 아이콘을 클릭하면 Data Job을 다른 프로젝트에 공유할 수 있다. 목록 위에 '검색' 입력항목에 검색할 Job 이름을 입력하고 <Enter> 키를 누르거나 image:resources/icon_search.png[width=22] 아이콘을 클릭하면 Job을 조회할 수 있다. 목록 아래에 조회된 건수와 페이징 정보, 조회할 건수를 선택할 수 있다.

목록에서 Data Job을 선택하면 Data Flow와 Data Job에 대한 내용이 화면 아래 영역에 조회되고, 'JOB 이름' 항목을 클릭하면 <<figure_datajob_detail, Data Flow 화면>>으로 이동해서 Flow를 생성하거나 수정할 수 있다. 자세한 내용은 <<sect_datajob_detail,"Data Flow 생성 및 수정">>을 참고한다.

[#figure_datajob] 
image::resources/figure_datajob.png[title="Data Job 화면",width=750]


NOTE: 여러 사용자가 동일한 Data Job을 동시에 실행할 수는 없지만 동일한 Data Flow를 가진 다른 Data Job은 동시에 수행할 수 있다.

////
 ---------------------
 section level-2 ====
 ---------------------
////
==== Data Job 생성

<<figure_datajob, Data Job 화면>>에서 [생성] 버튼을 클릭하면 Data Job을 등록할 수 있다. 각 항목을 입력한 후 [확인] 버튼을 클릭한다.

image::resources/figure_datajob_create.png[title="Data Job 생성",width=400]

////
 ---------------------
 section level-2 ====
 ---------------------
////
==== Data Job 수정

<<figure_datajob,Data Job 화면>>의 목록에 '동작' 항목에서 image:resources/icon_edit.png[width=20] 아이콘을 클릭하면 Data Job의 이름과 설명을 수정할 수 있다(등록된 프로젝트 정보는 변경할 수 없다). 각 항목을 수정한 후 [확인] 버튼을 클릭한다.

image::resources/figure_datajob_edit.png[title="Data Job 수정",width=400]

////
 ---------------------
 section level-2 ====
 ---------------------
////
==== Data Job 삭제

<<figure_datajob, Data Job 화면>>의 목록에서 Data Job을 선택한 후 [삭제] 버튼을 클릭하거나 '동작' 항목에 image:resources/icon_delete.png[width=20] 아이콘을 클릭하면 Data Job을 삭제할 수 있다. 목록에서 삭제정보를 확인한 후 [삭제] 버튼을 클릭한다.

image::resources/figure_delete_datajob.png[title="Data Job 삭제",width=300]

////
 ---------------------
 section level-2====
 ---------------------
////
==== Data Job 공유

<<figure_datajob, Data Job 화면>>의 목록에서 Data Job을 선택한 후 '동작' 항목에 image:resources/icon_export.png[width=20] 아이콘을 클릭하면 Data Job을 다른 프로젝트에 공유할 수 있다. 프로젝트 목록 위에 '검색' 입력항목에 검색할 프로젝트를 입력하고 image:resources/icon_search.png[width=22] 아이콘을 클릭하면 프로젝트를 조회할 수 있다. 공유할 Job 이름을 입력하고 프로젝트를 선택한 후 [적용] 버튼을 클릭한다.

image::resources/figure_datajob_export.png[title="Data Job 공유",width=450]


////
 ---------------------
 section level-2 ====
 ---------------------
////
[#sect_datajob_detail]
==== Data Flow 생성 및 수정Data Flow 

<<figure_datajob, Data Job 화면>>의 목록에서 'JOB 이름' 항목을 클릭하면 Data Flow을 생성하고 그에 따른 결과를 얻을 수 있다.

[#figure_datajob_detail]
image::resources/figure_datajob_detail.png[title="Data Flow 화면",width=750]

다음은 Data Flow 화면 구성에 대한 설명이다.

image::resources/figure_datajob_detail_composition.png[title="Data Flow 화면 구성",width=750]

다음은 각 영역에 대한 설명이다.

* ① 작업선택 영역
+
[width="100%",cols="3,7a",options="header"]
|====================================
|탭				|설명
|[Data] 탭		|등록된 데이터 객체의 목록을 조회한다. 목록 위에 '검색' 항목에 키워드를 입력하고 <Enter> 키를 누르거나 아이콘을 클릭하면 현재 조회 중인 프로
젝트에 등록된 데이터 객체 중 입력한 키워드를 포함한 데이터 객체를 검색
할 수 있다. 키워드에 매칭되는 정보에는 데이터 객체에 대한 논리명, 물리명,
설명, 태그, 작성자, 소속 카테고리, 소속 데이터소스 위치와 데이터 객체에
포함된 컬럼의 설명, 태그, 개별값이 있다. 각 데이터 객체 노드는 데이터소스
별로 구분되어 있으며, 데이터 객체 노드를 선택한 후 (5) 작업영역으로 드래
그하면 Flow를 작성할 수 있다. +
다른 프로젝트에서 공유 권한을 부여 받은 데이터 객체는 선택할 수 있다.
|[Function] 탭	|[Data] 탭에서 데이터 객체를 작업영역으로 드래그한 이후 [Function] 탭에서 노드를 (5) 작업영역으로 드래그해서 Data flow를 작성한다.
작업 영역에 Function이 추가되면 [Input], [Output] 탭에서 해당 기능을 설
정하고 수행 결과를 조회할 수 있다. +
– [Input] 탭 : 추가된 Function을 조회하거나 설정할 수 있다. 각 Function별
설정 화면에 대한 자세한 내용은 “5.2.5.2. [Function] 탭”을 참고한다. +
– [Output] 탭 : Function별 설정된 Data Flow의 수행 결과를 조회한다. [Data
Preview], [SQL], [Summary], [Correlation], [Ad-Hoc] 버튼을 클릭해서
설정한 결과를 조회할 수 있다. 자세한 내용은 “5.2.7. Data Flow 수행 결과
조회”를 참고한다.
|====================================
* ② 작업선택 영역 확대/축소
+
작업선택 영역을 확대하거나 축소한다.
* ③ 열린 Data Job 목록
+
열린 Data Job의 이름으로 탭이 구성된다.
* ④ 작업 툴바 
+
[width="100%",cols="3,7",options="header"]
|====================================
|버튼	|설명
|image:resources/icon_undo.png[width=16](Undo) / image:resources/icon_redo.png[width=16](Redo)	|되돌리기/ 앞으로 가기 버튼이다. Data Flow를 생성하는 과정에서 사용
할 수 있다.
|image:resources/icon_save.png[width=16](Save)	|Data Flow를 저장한다. 저장하지 않은 경우 현재까지 작성한 Flow는
보존되지 않는다.
|image:resources/icon_run.png[width=22](Run)		|Data Flow를 수행한다. 수행 결과는 [Output] 탭에서 조회할 수 있다.
|image:resources/icon_stop.png[width=16](Stop)	|	Data Flow를 수행을 중지한다. (현재 지원하지 않음)
|image:resources/icon_valiables.png[width=16](Show Variable)|Data Flow를 수행하는 경우 각 노드를 설정할 때 동일값 반복입력이 필
요한 경우 변수를 사용할 수 있다. Variable 화면([그림 5.8])에서 변수를
선택할 수 있다.
|image:resources/icon_sql.png[width=16](Show SQL View)	|Data Flow를 작동한 이후 성공적으로 작동한 Job에 대한 SQL문을 볼
수 있다.
|image:resources/icon_zoomout.png[width=16](Zoom In) / image:resources/icon_zoomin.png[width=16](Zoom Out) |Data Flow 작업영역을 확대, 축소한다.
|image:resources/icon_panmode.png[width=16](Pan Mode) |Pan Mode를 선택하면 마우스 클릭만으로 화면을 움직일 수 있다. 해당
아이콘을 한번더 눌리면 Pan Mode를 해제할 수 있다.
|image:resources/icon_fit.png[width=16](Fit)	|작업공간에 만든 Data Flow 영역을 가르킨다.
|image:resources/icon_acturalsize.png[width=20](Actual Size)	|처음에 Data Flow을 생성했던 size로 볼 수 있다.
|image:resources/icon_minimap.png[width=16](Mini Map)	|해당 아이콘을 클릭하면 미니맵이 사라진다. 한번더 클릭하면 미니맵을
볼 수 있다.
|====================================
+
툴바에서 image:resources/icon_valiables.png[width=22] ([Show Variable]) 버튼을 클릭하면 Data Job을 수행하는 경우 각 노드를 설정할 때 동일값 반복입력이 필요한 변수 조회할 수 있다. Variable 화면의 [변수 추가] 버튼을 클릭하면 변수를 추가할 수 있다.
+
Add Variable 화면에서 ID에는 원하는 변수의 이름을, 값에는 변수에 해당하는 값을 입력한 후 [적용]버튼을 클릭한다.
+
image::resources/figure_datajob_variable_add_1.png[title="Data Flow - Add Variable 화면",width=450]
+
저장된 변수는 GroupBy 노드의 Having 절, Selector 노드의 로우 선택 옵션, Validation 노드의 Condition을 추가할 때 [변수] 버튼을 클릭하여 조회해서 사용할 수 있다.
+
image::resources/figure_datajob_variable_add_2.png[title="Data Flow - Add Variable 적용 화면",width=500]
* ⑤ 작업영역
+
작업선택 영역에서 선택한 데이터 객체와 Function을 드래그해서 작업 영역에 추가할 수 있다. 추가한 노드에 따라서 작업영역 아래에 상세 정보가 조회된다. 툴바에 현재 작업 중인 Data Job의 상태를 표시되고, 오른쪽 미니맵에서 작업 영역에 추가된 데이터 객체와 Function을 축소해서 조회한다.

*Data Flow의 Timeout*

일반적으로 Data Flow의 단위 실행은 많은 시간이 소요된다. 이에 HyperData는 Data Flow의 단위 실행의 타임아웃을 지정하여 해당 시간이 넘어가면 강제로 작업을 종료하고 타임아웃 에러를 반환하는 기능이 있다. HyperData를 부팅하기 전 $PROOBJECT_HOME/application/hyperdata/servicegroup/web-service/config/servicegroup.properties에서 SERVICE_DATAFLOWDIRECTCREATE_TIMEOUT을 지정하여 타임아웃을 관리자 임의로 설정할 수 있다. (단위: ms)

다음은 8000ms로 타임아웃을 지정한 예이다.

....
SERVICE_DATAFLOWDIRECTCREATE_TIMEOUT = 8000 
....

SERVICE_DATAFLOWDIRECTCREATE_TIMEOUT 항목을 -1로 설정하면 타임아웃을 적용하지 않는다.

....
SERVICE_DATAFLOWDIRECTCREATE_TIMEOUT = -1
....

////
 ---------------------
 section level-3 =====
 ---------------------
////
[#sect_dataflow_data_tab]
===== [Data] 탭

Data Flow 화면의 [Data] 탭에서 데이터 객체를 작업영역으로 드래그해서 Flow를 작성한다.

데이터 객체 목록 위에 '검색' 입력항목에 검색할 데이터 객체 이름을 입력하면 해당 이름의 데이터 객체를 검색할 수 있다. 각 데이터 객체 노드는 데이터소스별로 구분되어 있으며, 데이터 객체 노드를 선택한 후 작업영역으로 드래그하면 테이블명, 컬럼정보를 확인할 수 있다. 또한 OUT 영역에서 데이터 객체의 데이터 일부를 미리볼 수 있다.

image::resources/figure_datajob_detail_data_tab.png[title="Data Flow 생성 - [Data] 탭",width=750]

////
 ---------------------
 section level-3 =====
 ---------------------
////
[#sect_dataflow_function_tab]
===== [Function] 탭 

Data Flow 화면의 [Data] 탭에서 데이터 객체를 작업영역으로 드래그하고 [Function] 탭에서 노드를 추가한 후 아래 [Input] 탭에서 각 Function별 정보를 설정해서 Data Flow를 작성한다.

 
image::resources/figure_datajob_detail_func_tab.png[title=" Data Flow 생성 - [Function] 탭",width=750]

다음은 [Function] 탭에서 선택할 수 있는 함수 목록이다.

* Data Manipulation
+
[width="100%",cols="3,7",options="header"]
|==============================================================
|구분	|설명
|<<sect_datajob_dataflow_groupby,GroupBy>>	|SQL의 Group by 문과 동일하게 테이블 내 하나의 컬럼에 대해 동일한 값
을 갖는 데이터들을 집계한다.
|<<sect_datajob_dataflow_join,Join>>		|관련 있는 테이블의 컬럼 기준으로 행을 합쳐주는 연산이며 여러 테이블을
조합한다.
|<<sect_datajob_dataflow_sort,Sort>>			|테이블을 컬럼 기준으로 정렬한다.
|<<sect_datajob_dataflow_selection,Selector>> |테이블에서 원하는 컬럼을 선택하여 출력한다.
|<<sect_datajob_dataflow_pivot,Pivot>>			|테이블 형태를 변경하여 광범위한 데이터를 요약한다.
|<<sect_datajob_dataflow_setoperators,Set Operators>>	|Union, Intersect, Minus 기능을 제공한다.
|<<sect_datajob_dataflow_deidentification,Deidentification>>|Masking, Suppression 기능을 제공한다.
|==============================================================
* User Defined Node
+
[width="100%",cols="3,7",options="header"]
|===============================================================
|구분		| 설명
|<<sect_datajob_dataflow_userdefinedquey,User Defined Query>>	|쿼리를 직접 작성한다.
|===============================================================
* Save
+
[width="100%",cols="3,7",options="header"]
|================================================================
|구분	|설명
|<<sect_datajob_dataflow_saveoutputdb,Save Output Database>>	  |플로우 실행 결과를 데이터베이스에 저장한다.
|<<sect_datajob_dataflow_saveoutputfile,Save Output File>>	    |플로우 실행 결과를 파일로 저장한다.
|<<sect_datajob_dataflow_saveoutputdo,Save Output DataObject>>	|플로우 실행 결과를 새로운 데이터 객체로 등록한다.
|<<sect_datajob_dataflow_saveoutputhadoop,Save Output Hadoop>>	|플로우 실행 결과를 하둡 파일시스템에 저장한다.
|================================================================
* Validation
+
[width="100%",cols="3,7",options="header"]
|==================================================
|구분 |설명
|<<sect_datajob_dataflow_validation,Validation>>|경고 및 오류조건을 설정하여 플로우 실행 결과에 대한 경고 및 오류 관련
정보를 제공한다.
|==================================================
* Prep
+
[width="100%",cols="3,7",options="header"]
|========================================================
|구분 |설명
|<<sect_datajob_dataflow_missingvalue,MissingValue>>	|테이블 데이터에 null 값이 존재하는 경우 해당 데이터를 처리한다.
|<<sect_datajob_dataflow_normalization,Normalization>>	|테이블 데이터의 상대적 크기에 대한 영향을 줄이기 위해 데이터의 범위를
0과 1 사이로 변환한다.
|<<sect_datajob_dataflow_sample,Sample>>				|테이블 데이터 상위부터 일부를 추출한다.
|<<sect_datajob_dataflow_outlier,Outlier>>				|테이블 데이터의 전체적인 패턴에서 벗어나는 데이터를 처리한다.
|========================================================

 
 
////
 ---------------------
 section level-4 =====
 ---------------------
////
[#sect_datajob_dataflow_groupby]
====== GroupBy

GroupBy는 SQL의 Group by 문과 동일하게 테이블 내 하나의 컬럼에 대해 동일한 값을 갖는 데이터들을 집계하는 기능을 제공한다. [Data Manipulation] > [GroupBy]을 선택한 후 작업 영역에 드래그해서 추가해서 GroupBy에 대한 내용을 설정하거나 조회할 수 있다.

* Group By 키
+
'입력 테이블명'에서 테이블을 선택하면Group By 키에 해당 테이블의 컬럼들이 조회된다. 왼쪽 목록에서 Group By 키로 설정할 컬럼을 선택하고 [>]버튼을 클릭하면 해당 컬럼을 키로 설정한다. [>>] 버튼을 클릭하면 모든 컬럼이 선택된다.
+
ROLLUP, CUBE와 같은 함수를 사용하려면 [+] 버튼을 클릭하고, 함수를 키 목록에서 제거하려면 [-] 버튼을 클릭한다.
+
ROLLUP을 사용할 경우 컬럼간의 순서로 인해 결과가 달라질 수 있음으로 컬럼 순서를 주의하여 선택한다. 왼쪽 목록에서 Group By Function 에 사용할 키로 설정할 컬럼을 선택하고 [>] 버튼을 클릭하면 해당 컬럼을 키로 설정한다. [>>] 버튼을 클릭하면 모든 컬럼이 선택된다. ROLLUP 혹은 CUBE 함수를 사용하는 경우 [Output] 탭의 data preview에서 100개의 행까지 최대로 조회할 수 있기 때문에 100개 이상인 결과를 모두 확인하려면 save output file을 사용한다.
* 출력 컬럼
+
출력 컬럼에서는 키로 설정한 컬럼에 대해 동일한 값을 갖는 데이터 중 집계할 컬럼과 집계 함수를 설정한다. [+Output Column]을 클릭하면 설정화면에서 각 항목을 설정한 후 [등록] 버튼을 클릭한다.
+
다음은 각 항목에 대한 설명이다.
+
[width="100%",cols="3,7a",options="header"]
|========
|항목		|설명
|컬럼		|집계할 컬럼을 선택한다. 
|집계함수	|집계 함수를 선택한다. +
– NONE +
– AVG +
– COUNT +
– MAX +
– MIN +
– SUM 
|별칭		|컬럼과 집계 함수를 선택하면 Alias가 자동생성된다.
|========
* Having
+
SQL의 Having 절과 동일하게 Out Column에서의 집계 결과에 대한 조건을 설정한다. [+Having Statement]를 클릭한 후 설정화면에서 각 항목을 설정한 후 [등록] 버튼을 클릭한다.
+
image::resources/figure_data_manipulation_groupby_4.png[title="Data Flow 생성 - GroupBy 설정 (4)",width=500]
+
다음은 각 항목에 대한 설명이다.
+
[width="100%",cols="2,8",options="header"]
|======
|항목	|설명
|컬럼   |설정할 조건에 해당하는 Out Column 내 컬럼을 선택한다.
|연산자 | 조건에서 사용할 비교 연산자를 선택한다.
|값     | 조건에서 사용할 비교 연산의 비교값을 선택한다.
|======
* 출력 테이블명 +
Data Flow를 연결한 다음 단계의 input에 '출력 테이블명'에 설정한 테이블명이 사용된다.
+
* 결과 출력 
+
'결과 출력' 항목을 체크하면 결과를 [Output] 탭의 [Data Preview]에서 조회할 수 있다.

 
////
 ---------------------
 section level-4 =====
 ---------------------
////
[#sect_datajob_dataflow_join]
====== Join 

Join은 관련 있는 테이블의 컬럼 기준으로 행을 합쳐주는 연산이며 여러 테이블을 조합하는 기능을 제공한다. [Data Manipulation] > [Join]을 선택한 후 작업 영역에 추가하면 Join에 대한 내용을 설정하거나 조회할 수 있다.

image::resources/figure_data_manipulation_join_1.png[title="Data Flow 생성 - Join 설정 (1)",width=750]


* Join Keys
+
'입력 테이블명'에서 테이블을 선택한 후 [+Join Key] 버튼을 클릭하면 설정화면에서 Join Type, 테이블, 테이블 별칭, 컬럼, 연산자 설정할 수 있다. 각 항목을 설정한 후 [등록] 버튼을 클릭한다.
+
image::resources/figure_data_manipulation_join_2.png[title="Data Flow 생성 - Join 설정 (2)",width=500]
+
다음은 주요 항목에 대한 설명이다.
+
[width="100%",cols="3,7a",options="header"]
|=========
|항목		|설명
|Join 타입	|Join 타입을 선택한다. +
- INNER  +
- LEFT OUTER +
- RIGHT OUTER +
- FULL OUTER +
- NATURAL OUTER +
- CROSS OUTER
|=========
* 출력 테이블명
+
Data Flow를 연결한 다음 단계의 input에 '출력 테이블명'에 설정한 테이블명이 사용된다. 
+
* 결과출력
+
'결과출력' 항목을 체크하면 결과를 [Output] 탭의 [Data Preview]에서 조회할 수 있다.

////
 ---------------------
 section level-4 =====
 ---------------------
////
[#sect_datajob_dataflow_Sort]
====== Sort 
 

Sort는 테이블을 컬럼 기준으로 정렬하는 기능을 제공한다.

[Data Manipulation] > [Sort]를 선택한 후 작업 영역에 드래그해서 추가하면 Sort에 대한 내용을 설정하거나 조회할 수 있다.

* Sort Key
+
'입력 테이블명'에서 테이블을 선택한 후 [+Sort Key] 버튼을 클릭한 후 설정화면에서 우선 순위, 컬럼, 정렬 순서, Null 순서를 설정한다. 각 항목을 설정한 후 [등록] 버튼을 클릭한다. 
+
image::resources/figure_data_manipulation_sort.png[title="Data Flow 생성 - Sort 설정",width=600]
+
다음은 각 항목에 대한 설명이다.
+
[width="100%",cols="3,7",options="header"]
|=========
|항목		|설명
|컬럼		|	정렬할 기준이 될 컬럼을 선택한다.
|정렬 순서	|정렬 순서를 선택한다. +
– ASC(오름차순) +
– DESC(내림차순)
|Null 순서	|Null 값의 위치를 선택할 수 있다. +
– LAST +
– FIRST 
|액션		|추가된 Sort Key는 정렬기준 목록의 '액션' 항목의 아이콘을 클릭해서 수정하거나 삭제할 수 있다.
|=========
* 출력 테이블명
+
Data Flow를 연결한 다음 단계의 input에 '출력 테이블명'에 설정한 테이블명이 사용된다.
* 결과출력
+
'결과출력' 항목을 체크하면 결과를 [Output] 탭의 [Data Preview]에서 조회할 수 있다.

 
////
 ---------------------
 section level-4 =====
 ---------------------
////
[#sect_datajob_dataflow_selection]
====== Selector 

Selector은 테이블에서 원하는 컬럼을 선택하여 출력하는 기능을 제공한다.

[Data Manipulation] > [Selector]을 선택한 후 작업 영역에 드래그해서 추가하면 Selector에 대한 내용을 설정하거나 조회할 수 있다.
 
image::resources/figure_data_manipulation_selection_1.png[title=" Data Flow 생성 - Selector 설정 (1)",width=600]

* 컬럼 선택 옵션
+
'입력 테이블명'에서 테이블을 선택한 후 컬럼 선택 옵션에서 [+Column] 버튼을 클릭하면 컬럼을 선택해서 추가할 수 있고, [+All] 버튼을 클릭하면 해당 테이블의 모든 컬럼을 추가할 수 있다. 각 항목을 설정한 후 [등록] 버튼을 클릭한다.
+
** [Column] 탭
+
해당 테이블의 컬럼 중에서 선택하는 방식으로 선택할 컬럼을 추가할 수 있다. 다중 선택이 가능하고 컬럼을 선택하는 경우 자동으로 별칭이 생성된다. 각 컬럼에 대한 별칭을 지정하고 [등록] 버튼을 클릭하면 해당 컬럼이 추가된다.
** [Custom] 탭
+
선택할 컬럼과 Min 또는 Max와 같은 연산을 필요에 맞게 조합하여 직접 작성하는 방식으로 추가할 수 있다. 
+
image::resources/figure_data_manipulation_selection_4.png[title="Data Flow 생성 - Selector 설정 (3)",width=500]
+
다음은 각 항목에 대한 설명이다.
+
[width="100%",cols="2,8",options="header"]
|====
|항목   |설명
|컬럼   |선택한 테이블의 컬럼이다.
|별칭   |컬럼을 클릭하면 Alias가 생성된다.
|====
* 로우 선택 옵션
+
로우 선택 옵션에서는 출력할 데이터에 대한 조건을 조회한다. [+Condition] 버튼을 클릭한 후 설정화면에서 각 항목을 설정한 후 [등록] 버튼을 클릭한다.
+
image::resources/figure_data_manipulation_selection_3.png[title="Data Flow 생성 - Selector 설정 (4)",width=500]
+
다음은 각 항목에 대한 설명이다.
+
[width="100%",cols="3,7a",options="header"]
|==========
|항목		|설명		
|논리연산자	|각각 조건에서 사용할 논리연산자를 선택한다. +
– AND +
– OR
|컬럼       |설정할 조건에 해당하는 컬럼을 선택한다.
|연산자     |각각 조건에서 사용할 비교 연산자를 선택한다.
|값         |각각 조건에서 사용할 비교 연산의 비교값을 입력한다.
|==========
* 출력 테이블명
+
Data Flow를 연결한 다음 단계의 input에 '출력 테이블명'에 설정한 테이블명이 사용된다.
* 결과출력
+
'결과출력' 항목을 체크하면 결과를 [Output] 탭의 [Data Preview]에서 조회할 수 있다.

 
////
 ---------------------
 section level-4 =====
 ---------------------
////
[#sect_datajob_dataflow_pivot]
====== Selector 

Pivot은 테이블 형태를 변경하여 광범위한 데이터를 요약하는 기능을 제공한다.

[Data Manipulation] > [Pivot]을 선택한 후 작업 영역에 드래그해서 추가하면 Pivot에 대한 내용을 설정하거나 조회할 수 있다.

image::resources/figure_pivot_property.png[title="Data Flow 생성 - Pivot 설정",width=650]
* Fields
+
'입력 테이블명'에서 테이블을 선택하면 왼쪽 컬럼 후보에 사용할 수 있는 컬럼 리스트가 조회된다.
+
새 테이블의 Row로 사용할 컬럼을 피봇 로우로 설정하려면 왼쪽 '컬럼 후보'에서 사용할 컬럼을 선택한 후 '피봇 로우' 항목의 [+]을 클릭한다. 동일한 방법으로 새 테이블의 Column, Value로 사용될 컬럼을 선택하여 '피봇 컬럼', '피봇 값' 항목으로 설정한다. Value에 집계함수가 필요한 경우 '집계 함수' 항목을 설정한다.
+
NOTE: 현재 Pivot 노드 뒤에는 <<sect_datajob_dataflow_saveoutputfile,"Save Output File">> Function만 사용할 수 있다.

* 출력 테이블명
+
Data Flow를 연결한 다음 단계의 input에 '출력 테이블명'에 설정한 테이블명이 사용된다.
* 결과출력
+
'결과출력' 항목을 체크하면 결과를 [Output] 탭의 [Data Preview]에서 조회할 수 있다.

 
////
 ---------------------
 section level-4 =====
 ---------------------
////
[#sect_datajob_dataflow_setoperators]
====== Set Operators 

[Data Manipulation] > [Set Operators]을 선택한 후 작업 영역에 드래그해서 추가하면 Set Operators에 대한 내용을 설정하거나 조회할 수 있다.

image::resources/figure_data_manipulation_setoperators.png[title="Data Flow 생성 - Set Operators 설정 (1)",width=650]
* 집합 연산자 타입
+
'집합 연산자 타입' 항목에 선택한 값에 따라 기능을 설정할 수 있다.
+
[width="100%",cols="3,7",options="header"]
|================
|구분				|설명
|UNION, UNION ALL	|두 개 이상의 테이블을 결합하는 데 사용한다. 중복 데이터 허용 여부에 따라 UNION과 UNION ALL을 선택할 수 있고, UNION ALL의 경우 중복 데이터를
허용한다.
|INTERSECT			|두 개 이상의 테이블의 공통된 부분을 알 수 있다. 교집합과 같은 기능이다.
|MINUS				|차집합의 기능을 제공하며 테이블 연결 순서가 반대로 될 경우 원하는 결과가 나오지 않기 때문에 [테이블 연결 순서]가 중요하다. Set Operators Type으로 Minus를 선택하면 연결된 테이블 간의 순서를 확인할 수 있다. 연결 순서를 바꿀 경우 테이블에서 Set Operators 노드로 연결된 화살표를 지우고
원하는 순서로 다시 연결한다.
|================
* 집합 연산자 키
+
'입력 테이블명'에서 테이블을 선택한 후 [+Set Operators Key] 버튼을 클릭하면 각 테이블에서 서로 결합될 컬럼을 선택할 수 있다. '별칭' 항목을 입력하면 결합된 테이블에서의 컬럼명을 설정할 수 있다. 이때 각 테이블에서 가져오는 컬럼은 모두 동일 타입이어야 한다. 각 항목을 설정하고 [등록] 버튼을 클릭한다.
+
image::resources/figure_data_manipulation_setoperators_key.png[width=500]

* 출력 테이블명
+
Data Flow를 연결한 다음 단계의 input에 '출력 테이블명'에 설정한 테이블명이 사용된다.
* 결과출력
+
'결과출력' 항목을 체크하면 결과를 [Output] 탭의 [Data Preview]에서 조회할 수 있다.

 
////
 ---------------------
 section level-4 =====
 ---------------------
////
[#sect_datajob_dataflow_deidentification]
====== Deidentification

Deidentification은 데이터에서 식별정보를 제거함으로써 개인 정보를 특정 인물/대상과 연결할 수 없도록 정보를 희석시키는 기능을 제공한다.

[Data Manipulation] > [Deidentification]을 선택한 후 작업 영역에 드래그해서 추가하면 Deidentification에 대한 내용을 설정하거나 조회할 수 있다.

image::resources/figure_data_manipulation_deidentification.png[title="Data Flow 생성 - Deidentification 설정 (1)",width=650]

* 컬럼 선택
+
'컬럼 선택'항목에서 사용할 수 있는 컬럼 리스트가 조회된다.
* 옵션 선택
+
'옵션 선택' 항목에서 원하는 Deidentification 기능을 선택할 수 있다.
+
[width="100%",cols="3,7",options="header"]
|===========	
|구분		|
|Masking	|
|Suppression|
|===========
+
'마스킹 옵션' 테이블에서 등록된 옵션들을 확인할 수 있다. 원하지 않는 옵션이 있을 경우 해당하는 옵션의 체크박스를 체크한 후 [삭제] 버튼을 클릭하면 해당 옵션이 '마스킹 옵션'에서 제거된다.
+
image::resources/figure_data_manipulation_deidentification_optiontable.png[title="Data Flow 생성 - Deidentification 설정 (2)",width=720]
* 출력 테이블명
+
Data Flow를 연결한 다음 단계의 input에 '출력 테이블명'에 설정한 테이블명이 사용된다.
* 결과출력
+
'결과출력' 항목을 체크하면 결과를 [Output] 탭의 [Data Preview]에서 조회할 수 있다.

 
////
 ---------------------
 section level-4 =====
 ---------------------
////
[#sect_datajob_dataflow_userdefinedquey]
====== User Defined Query

[User Defined Node] > [User Defined Query]을 선택한 후 작업 영역에 드래그해서 추가하면 쿼리를 직접 작성할 수 있다. '입력 테이블명', '컬럼'의 각 항목을 더블클릭하면 테이블 이름, 컬럼 이름이 입력된다. 쿼리를 작성한 후 [등록] 버튼을 클릭한다.

image::resources/figure_user_defined_query.png[title="Data Flow 생성 - User Defined Query 설정",width=750]

* 출력 테이블명
+
Data Flow를 연결한 다음 단계의 input에 '출력 테이블명'에 설정한 테이블명이 사용된다.

 
////
 ---------------------
 section level-4 =====
 ---------------------
////
[#sect_datajob_dataflow_saveoutputdb]
====== Save Output Database

Save Output Database 노드를 활용하면 Data Job 노드의 결과물을 데이터베이스의 테이블에 저장할 수 있다. [Save] > [Save Output Database]을 선택한 후 작업 영역에 드래그해서 추가하면 플로우 실행 결과를 저장할 데이터베이스와 테이블을 설정할 수 있다.

image::resources/figure_save_database.png[title="Data Flow 생성 - Save Output Database 설정",width=750]
다음은 각 항목에 대한 설명이다.

[width="100%",cols="3,7",options="header"]
|================
|항목				|설명
|데이터베이스		|
|테이블				|
|타겟 테이블 컬럼	|
|컬럼 맵핑 정보		|
|================

Save Output Database 기능을 사용하기 위해서는 저장할 데이터가 삽입될 테이블을 목적지 데이터베이스에 먼저 생성한 이후에 목적지 데이터베이스와 타겟 테이블을 순차적으로 선택해야 한다. 타겟 테이블을 선택하고 나면, 컬럼 맵핑을 진행할 수 있도록 타겟 테이블의 컬럼 정보가 화면에 나타난다. 컬럼 맵핑(일대일대응)은 저장할 테이블과 목적지 데이터베이스의 타겟 테이블의 컬럼 타입과 사이즈를 고려하여 유효한 값들만 삽입될 수 있도록 해야 한다.

다음은 에러 메시지가 발생할 수 있는 상황들에 대한 설명이다.
....
JDBC-12126 : Given string does not represent a number in proper format.
....

목적지 테이블 컬럼과 저장할 컬럼의 타입이 맞지 않는 경우이다. (예: 저장할 컬럼의 타입이 NUMBER가 아닌데 목적지 테이블 타입이 NUMBER일 경우)
....
JDBC-12126 : The Values is too large for the column.
....

목적지 테이블 컬럼의 사이즈보다 플로우를 통해 저장할 테이블 컬럼의 사이즈가 더 크다. (예: 목적지 컬럼의 VARCHAR 타입의 사이즈는 10인데 저장할 플로우 데이터의 VARCHAR 컬럼 데이터 크기가 20일 경우)

////
 ---------------------
 section level-4 =====
 ---------------------
////
[#sect_datajob_dataflow_saveoutputfile]
====== Save Output File


[Save] > [Save Output File] 을 선택한 후 작업 영역에 드래그해서 추가하면 플로우 실행 결과를 파일로 저장할 수 있다. '컬럼 이름 저장' 항목을 체크하면 플로우의 결과를 컬럼 이름과 함께 저장한다. 설정 이후 <<figure_datajob_detail,Data Flow 화면>> 툴바의 image:resources/icon_run.png[width=22]([Run])을 클릭한다.

image::resources/figure_save_output_file_1.png[title="Data Flow 생성 - Save Output File 설정",width=400]

다음은 각 항목에 대한 설명이다.

[width="100%",cols="3,7",options="header"]
|================
|항목				|설명
|저장할 파일 이름	|
|저장할 파일 형식	|
|컬럼 구분자	    |
|선 구분자			|
|================

 

////
 ---------------------
 section level-4 =====
 ---------------------
////
[#sect_datajob_dataflow_saveoutputdo]
====== Save Output DataObject

[Save] > [Save Output DataObject]을 선택한 후 작업 영역에 드래그해서 추가하면 플로우 실행 결과를 새로운 데이터 객체로 등록할 수 있다.

새로 만들어질 데이터 객체의 이름을 '데이터 객체 이름' 항목에 입력한 후 [적용] 버튼을 클릭한다. 만들어진 데이터 객체는 #Default DataSource에 생성되며 플로우 수행 이후부터 데이터 객체로 사용할 수 있다.

image::resources/figure_save_data_object.png[title="Data Flow 생성 - Save Output DataObject 설정",width=400]
 
////
 ---------------------
 section level-4 =====
 ---------------------
////
[#sect_datajob_dataflow_saveoutputhadoop]
====== Save Output Hadoop


[Save] > [Save Output Hadoop]을 선택한 후 작업 영역에 드래그해서 추가하면 플로우 실행 결과를 하둡 파일시스템으로 저장할 수 있다. '컬럼 이름 저장' 항목을 체크하면 플로우의 결과를 컬럼 이름과 함께 저장한다. 설정 이후 D<<figure_datajob_detail,Data Flow 화면 >> 툴바의 image:resources/icon_run.png[width=22]을 클릭한다.

image::resources/figure_save_output_hadoop.png[title="Data Flow 생성 - Save Output Hadoop 설정",width=700]

* 기본 정보
+
다음은 각 항목에 대한 설명이다.
+
[width="100%",cols="3,7",options="header"]
|===========
|항목		    |설명
|HDFS URL	    |
|파일 경로		|
|컬럼 구분자	|
|선 구분자		|
|===========
* Kerberos Authentication
+
다음은 Kerberos (커버로스)로 보안이 관리되고 있는 하둡 시스템에 추가로 지정해야 하는 항목에 대한 설명이다.
+
[width="100%",cols="3,7",options="header"]
|================
|항목				|설명
|설정 파일 경로	    |
|영역				|
|사용자 프린시플    |
|Keytab 파일 경로   |
|================
 
////
 ---------------------
 section level-4 =====
 ---------------------
////
[#sect_datajob_dataflow_validation]
====== Validation

[Validation] > [Validation]을 선택한 후 작업 영역에 드래그해서 추가하면 플로우 실행 결과에 대한 경고 및 오류 관련 정보를 등록할 수 있다.

image::resources/figure_validation_1.png[title="Data Flow 생성 - Validation 설정 (1)",width=650]

* 경고조건
+
'입력 테이블명'에서 테이블을 선택한 후 [+Warning Condition] 버튼을 클릭하면 설정화면에서 논리 연산자, 컬럼, 집계함수, 연산자, 값을 설정할 수 있다. 각 항목을 설정한 후 [등록] 버튼을 클릭한다. 
+
image::resources/figure_validation_2.png[title="Data Flow 생성 - Validation 설정 (2)",width=650]
+
다음은 각 항목에 대한 설명이다.
+
[width="100%",cols="3,7",options="header"]
|==========
|항목		|설명
|논리연산자	|
|컬럼		|
|집계 함수	|	
|연산자		|
|값			|
|==========
* 에러조건
+
[+Error Condition] 버튼을 클릭하면 Warning Condition과 동일한 방법으로 원하는 오류 조건을 설정할 수 있다. 각 항목을 설정하고 [등록] 버튼을 클릭한다.
+
image::resources/figure_validation_3.png[title="Data Flow 생성 - Validation 설정 (3)",width=550]
* 검사 결과
+
플로우 실행 결과 중 설정한 경고 및 오류 조건에 해당하는 횟수를 출력한다. image:resources/icon_showpopup.png[width=22] 아이콘을 클릭하면 조건에 해당하는 데이터를 확인할 수 있다. 오류 조건에 필터링되어 오류 상황으로 집계된 데이터는 경고 조건에서 필터링 되지 않는다.
 
////
 ---------------------
 section level-4 =====
 ---------------------
////
[#sect_datajob_dataflow_missingvalue]
====== MissingValue

[Prep] > [MissingValue]을 선택한 후 작업 영역에 드래그해서 추가하면 테이블 데이터에 null 값이 존재하는 경우 해당 데이터를 처리하는 기능을 설정할 수 있다.

image::resources/figure_prep_missingvalue_1.png[title="Data Flow 생성 - MissingValue 설정 (1)",width=380]

'컬럼 선택' 항목의 image:resources/icon_showpopup.png[width=22] 아이콘을 클릭하면 Strategy를 설정할 수 있다. Missing Value 화면에서 적용할 컬럼을 선택한 후 Strategy를 선택한 후[Apply]버튼을 클릭하면 null 값이 해당 Strategy로 채워진다.

image::resources/figure_prep_missingvalue_2.png[title="Data Flow 생성 - MissingValue 설정 (2)",width=550]

 
////
 ---------------------
 section level-4 =====
 ---------------------
////
[#sect_datajob_dataflow_normalization]
====== Normalization

[Prep] > [Normalization]을 선택한 후 작업 영역에 드래그해서 추가하면 테이블 데이터의 상대적 크기에 대한 영향을 줄이기 위해 데이터의 범위를 0과 1 사이로 변환하는 기능을 설정할 수 있다.

image::resources/figure_prep_normalization_1.png[title="Data Flow 생성 - Normalization 설정 (1)",width=380]

'컬럼 선택' 항목의 image:resources/icon_showpopup.png[width=22] 아이콘을 클릭하면 Scaler를 설정할 수 있다. Normalization 화면에서 적용할 컬럼을 선택한 후 Scaler(Min-Max, Z-Score)를 선택한 후 [Apply] 버튼을 클릭하면 데이터의 범위를 변환할 수 있다.

image::resources/figure_prep_normalization_2.png[title="Data Flow 생성 - Normalization 설정 (2)",width=550]

 
////
 ---------------------
 section level-4 =====
 ---------------------
////
[#sect_datajob_dataflow_sample]
====== Sample

[Prep] > [Sample]을 선택한 후 작업 영역에 드래그해서 추가하면 테이블 데이터 상위부터 일부를 추출하는 기능을 설정할 수 있다. '크기' 항목에 조회할 행의 갯수를 지정하여 추출할 수 있다. 단, 테이블 행을 넘는 행의 갯수를 요청할 경우 테이블 전체를 추출한다.

image::resources/figure_prep_sample.png[title="Data Flow 생성 - Sample 설정",width=400]

 
 
////
 ---------------------
 section level-4 =====
 ---------------------
////
[#sect_datajob_dataflow_outlier]
====== Outlier

[Prep] > [Outlier]을 선택한 후 작업 영역에 드래그해서 추가하면 테이블 데이터의 전체적인 패턴에서 벗어나는 데이터를 처리하는 기능을 설정할 수 있다.

image::resources/figure_prep_outlier_1.png[title="Data Flow 생성 - Outlier 설정 (1)",width=400]

다음은 각 항목에 대한 설명이다.

[width="100%",cols="3,7",options="header"]
|=============
|항목			|설명
|컬럼 선택		|
|알고리즘 선택  |
|Outlier 제거   |
|=============

Data Flow의 Run 수행 후 결과를 [Output] 탭의 [Data Preview]에서 조회할 수 있다. 해당 컬럼에 대한 Outlier 판별 여부를 '해당 컬럼명_OUTLIER' 컬럼을 통해 확인할 수 있다. Outlier로 판별되면 'TRUE'로 표기되고, 판별되지 않으면 'FALSE'로 표시된다.

image::resources/figure_prep_outlier_2.png[title="Data Flow 생성 - Outlier 설정 (2)",width=700]

'Outlier 제거'체크박스를 설정하면 Outlier로 판별된 데이터가 제거되어 조회된다. <<figure_prep_outlier_2,Data Flow 생성 - Outlier 설정 (2)>>과 달리 '해당 컬럼명_OUTLIER'컬럼은 표시되지 않는다.

image::resources/figure_prep_outlier_3.png[title="Data Flow 생성 - Outlier 설정 (3)",width=700]

////
 ---------------------
 section level-2 ====
 ---------------------
////
[#sect_dataflow_additional_function]
==== Data Flow 수행 

Data Flow의 생성이 완료되면 <<figure_datajob_detail, Data Flow 화면>> 툴바의 image:resources/icon_run.png[width=22]([Run]) 버튼을 클릭한다. Data Flow 수행할 때 Bind Parameter와 Status Monitoring 부가적인 기능을 제공한다.

////
 ---------------------
 section level-3 =====
 ---------------------
////
===== Bind ParameterBind Parameter 

Data Job의 GroupBy, Selector, Validation의 Condition을 설정할 때 Value로 Bind Paramter를 사용할 수 있다. Condition 설정 화면에서 'Value' 항목에 '콜론(:)+ Bind Parameter의 이름'을 입력하면 추가할 수 있다.

image::resources/figure_bind_parameter_1.png[title="Data Flow 수행 - Bind Parameter (1)",width=550]

함수에 Bind Parameter가 설정된 경우 Data Flow를 수행할 때 Bind Parameter의 값을 입력할 수 있다. Bind Parameter 화면에 값을 입력한 후 [Apply] 버튼을 클릭한다. Data Job에서 Bind Parameter를 설정한 후 Service Job에서 해당 Data Job을 사용할 경우 Bind Parameter를 사용할 수 있다.

image::resources/figure_bind_parameter_2.png[title="Data Flow 수행 - Bind Parameter (2)",width=350]

////
 ---------------------
 section level-3 =====
 ---------------------
////
===== Status MonitoringStatus Monitoring

Data Flow의 Data Job 또는 Service Job의 실행 진행상황이나 실시간 노드별 결과(Finished, Stand By, Running)를 각 Job의 상단에 색과 함께 표시한다. 각 수행한 내용은 <<figure_jobmonitoring_servicejob, Job Monitoring 화면)에서 해당 Job를 선택하면 확인할 수 있다. 자세한 내용은 <<sect_job_job_mornitoring, "@@">>을 참고한다.


image::resources/figure_datajob_editor_running.png[title="Data Flow - Job 실행 도중 화면 (Editor)",width=700]

////
 ---------------------
 section level-3 =====
 ---------------------
////
[#sect_dataflow_output_tab]
===== Data Flow 수행 결과 조회 
 
Data Flow 실행 결과는 각 노드를 클릭한 후 [Output] 탭을 클릭하여 확인할 수 있다.

* [Data Preview] 탭
+
[Data Preview] 탭은 쿼리 결과를 표로 조회할 수 있다. 행 개수를 입력하고 보기 버튼을 클릭한다. 데이터 미리보기는 100개의 행까지 확인이 가능하다.
+
image::resources/figure_dataflowresult_data_preview.png[title="Data Flow 결과 조회 - Data Preview",width=700]
* [SQL] 탭
+
[SQL] 탭은 수행 결과를 SQL 쿼리문으로 조회한다.
+
image::resources/figure_dataflowresult_sql.png[title="Data Flow 결과 조회 - SQL",width=700]
* [Summary] 탭 
+
[Summary] 탭은 컬럼별로 통계 정보를 요약하여 제공한다. 총 7가지의 통계 정보(min, max, mean, median, countMissing, var, std)를 제공한다.
+
image::resources/figure_dataflowresult_summary.png[title="Data Flow 결과 조회 - Summary",width=700]
* [Correlation] 탭
+
[Correlation] 탭은 컬럼 간의 연관된 정도를 나타내는 상관관계 정보를 제공한다. 상관관계 정보는 -1과 1 사이의 값을 가지며 절대값이 1에 가까울수록 높은 상관관계의 정도를 나타낸다. 컬럼 타입이 NUMBER인 경우만 제공받을 수 있으며, 2개 이상의 컬럼을 선택해야 한다.
+
image::resources/figure_dataflowresult_correlation.png[title="Data Flow 결과 조회 - Correlation",width=700]
* [Ad-Hoc] 탭
+
[Ad-Hoc] 탭은 즉각적인 분석을 수행할 수 있다. 'Chart Type' 항목을 클릭하면 분석 목적에 따라 차트 타입을 선택할 수 있다. 차트 리스트에서 5가지의 차트 타입을 제공하며 차트를 선택하면 차트 타입에 해당되는 설정 화면이 나타난다.
+
image::resources/figure_dataflowresult_ad_hoc_charttype.png[title="Data Flow 결과 조회 - 차트 리스트",width=450]
+
다음은 각 차트별 설정 항목에 대한 설명이다.
+
** 꺽은선 차트(Line Chart) 
+
[width="100%",cols="3,7",options="header"]
|=======
|항목		|설명
|X Index	|
|Y Value	|	
|=======
** 원형 차트(Pie Chart) 
+
[width="100%",cols="3,7",options="header"]
|=====
|항목		|설명
|Value		|	
|=====
** 분포 차트(Scatter Chart) 
+
[width="100%",cols="3,7",options="header"]
|=======
|항목		|설명
|X Value	|
|Y Value	|
|=======
** 거품형 차트(Bubble Chart) 
+
[width="100%",cols="3,7",options="header"]
|=======
|항목		|설명
|X Value	|
|Y Value	|
|Z Value	|
|=======	
** 바 차트(Bar Chart) 
+
[width="100%",cols="3,7",options="header"]
|=======
|항목		|설명		
|X Index	|
|Y Value	|	
|=======
+
설정 화면에서 차트에 적용해야 할 컬럼을 지정할 수 있다. 각 차트별 조건이 다르며 물음표 아이콘 위에 마우스를 올려놓으면 그에 해당하는 설명을 제공한다. [+] 버튼을 클릭하면 조건에 해당되는 컬럼 목록을 확인할 수 있다. 컬럼 목록에서 설정할 컬럼을 선택한다.
+
image::resources/figure_dataflowresult_ad_hoc_1.png[title="Data Flow 결과 조회 - 차트 컬럼 설정",width=450]
+
설정 후 [Run] 버튼을 클릭하면 그에 대한 분석 결과를 차트로 조회할 수 있다.
+
image::resources/figure_dataflowresult_ad_hoc_2.png[title="Data Flow 결과 조회 - Ad-Hoc 분석 결과",width=750]
